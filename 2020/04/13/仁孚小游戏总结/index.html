<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="仁孚小游戏总结"><meta name="keywords" content=""><meta name="author" content="mind-node"><meta name="copyright" content="mind-node"><title>仁孚小游戏总结 | 博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#项目经验总结-问题-解决方法"><span class="toc-number">1.</span> <span class="toc-text">项目经验总结(问题+解决方法)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-仁孚小游戏"><span class="toc-number">1.0.1.</span> <span class="toc-text">1.仁孚小游戏</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-loading页面预加载问题"><span class="toc-number">1.0.1.0.1.</span> <span class="toc-text">1.1 loading页面预加载问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-移动端适配问题"><span class="toc-number">1.0.1.0.2.</span> <span class="toc-text">1.2 移动端适配问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-真机预览"><span class="toc-number">1.0.1.0.3.</span> <span class="toc-text">1.3 真机预览</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-打包问题"><span class="toc-number">1.0.1.0.4.</span> <span class="toc-text">1.4 打包问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-h5页面"><span class="toc-number">1.0.2.</span> <span class="toc-text">2.h5页面</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-布局紊乱，背景图片过大"><span class="toc-number">1.0.2.0.1.</span> <span class="toc-text">2.1 布局紊乱，背景图片过大</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-vue中的微信分享-不含获取用户信息"><span class="toc-number">1.0.2.0.2.</span> <span class="toc-text">2.2 vue中的微信分享(不含获取用户信息)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-ios-输入框弹起问题"><span class="toc-number">1.0.2.0.3.</span> <span class="toc-text">2.3 ios 输入框弹起问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-将后台返回的毫秒时间转化为年月日"><span class="toc-number">1.0.2.0.4.</span> <span class="toc-text">2.4 将后台返回的毫秒时间转化为年月日</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-5-在vue项目里实现上下滑动翻页"><span class="toc-number">1.0.2.0.5.</span> <span class="toc-text">2.5 在vue项目里实现上下滑动翻页</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-6-微信h5页面产生导航栏问题"><span class="toc-number">1.0.2.0.6.</span> <span class="toc-text">2.6 微信h5页面产生导航栏问题</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">mind-node</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">5</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">1</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">2</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories/">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">仁孚小游戏总结</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-13</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="项目经验总结-问题-解决方法"><a href="#项目经验总结-问题-解决方法" class="headerlink" title="项目经验总结(问题+解决方法)"></a>项目经验总结(问题+解决方法)</h1><h3 id="1-仁孚小游戏"><a href="#1-仁孚小游戏" class="headerlink" title="1.仁孚小游戏"></a>1.仁孚小游戏</h3><h5 id="1-1-loading页面预加载问题"><a href="#1-1-loading页面预加载问题" class="headerlink" title="1.1 loading页面预加载问题"></a>1.1 loading页面预加载问题</h5><ul>
<li><p>字体图片加载</p>
</li>
<li><p>问题描述：在loading页面加载的途中要把项目内所用到的资源先加载出来，避免出现留白卡顿的地方，提 升用户的体验</p>
</li>
<li><p>问题解决方案：使用 loadjs 包裹预加载的内容   缺点：不能预加载音频视频</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">具体用法：</span><br><span class="line"></span><br><span class="line">npm install --save loadjs</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> loadjs = <span class="built_in">require</span>(<span class="string">'loadjs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要等待加载的文件</span></span><br><span class="line">loadjs([<span class="string">'/path/to/foo.js'</span>, <span class="string">'/path/to/bar.js'</span>], <span class="string">'foobar'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//加载完成后执行的代码</span></span><br><span class="line">loadjs.ready(<span class="string">'foobar'</span>, &#123;</span><br><span class="line">  success: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">/* foo.js &amp; bar.js loaded */</span> &#125;,</span><br><span class="line">  error: <span class="function"><span class="keyword">function</span>(<span class="params">depsNotFound</span>) </span>&#123; <span class="comment">/* foobar bundle load failed */</span> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>音频加载</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">a方案：可以在标签上设置预加载属性</span><br><span class="line">&lt;audio src=<span class="string">'./audio/bg.mp3'</span> autoplay=<span class="string">'autoplay'</span> loop preload=<span class="string">'auto'</span> id=<span class="string">'sendid2'</span>&gt;&lt;<span class="regexp">/audio&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">b方案：创建音乐再预加载</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 预加载的音乐</span></span><br><span class="line"><span class="regexp">var music = document.createElement("audio");</span></span><br><span class="line"><span class="regexp">    music.src = "音乐地址"; /</span><span class="regexp">/放线上地址会更快</span></span><br><span class="line"><span class="regexp">    music.loop=true;</span></span><br><span class="line"><span class="regexp">var isOnce =0 /</span><span class="regexp">/一个控制变量控制事件只执行一次</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">music.load()/</span><span class="regexp">/加载音乐</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ canplaythrough 判断音乐能否完整播放，注意此事件在苹果，安卓手机上支持不同需要慎用</span></span><br><span class="line"><span class="regexp">music.addEventListener("canplaythrough",</span></span><br><span class="line"><span class="regexp">                function() &#123;</span></span><br><span class="line"><span class="regexp">                    if(isOnce==0)&#123; </span></span><br><span class="line"><span class="regexp">                        $('.loading').hide();</span></span><br><span class="line"><span class="regexp">                        showMain();</span></span><br><span class="line"><span class="regexp">                        isOnce++</span></span><br><span class="line"><span class="regexp">                     &#125;</span></span><br><span class="line"><span class="regexp">                &#125;,false);</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h5 id="1-2-移动端适配问题"><a href="#1-2-移动端适配问题" class="headerlink" title="1.2 移动端适配问题"></a>1.2 移动端适配问题</h5><ul>
<li>背景图片适配</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>拿到设计图之前先分析要不要分层很大的背景图片放在最下面，上面的有变动的作为单独的小块定位或者其他方法使其对应到相应位置</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>切记，先分析好再动手，谨慎使用定位</span><br></pre></td></tr></table></figure>



<ul>
<li><p>部分图标按钮适配</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>不同的机型要考虑<span class="number">1</span>比<span class="number">1</span>还原设计图，思想就是在大屏手机上图片尺寸大一点，小手机图片尺寸小一点，这里需要灵活的运用 vw、vh、px、rem等单位，必要时候需要用到媒体查询，在不同的尺寸下设置样式，就可以基本保证图标按钮随着机型的不同而不同</span><br><span class="line">媒体查询：</span><br><span class="line">@media screen and (max-width:大小 )&#123;&#125; 大到小</span><br><span class="line">@media screen and (min-width:大小 )&#123;&#125;   小到大</span><br><span class="line">@media screen and (min-width:大小 ) and (max-width:大小 )&#123;&#125;</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h5 id="1-3-真机预览"><a href="#1-3-真机预览" class="headerlink" title="1.3 真机预览"></a>1.3 真机预览</h5>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>运行项目，手机和项目在同一个局域网下，进入项目地址即可在手机上浏览</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>项目手机浏览注意以下几点</span><br><span class="line">	a.页面有没有按设计图正常显示(不出现过度变形，文字超出相应区域，字体样式，按钮字体行高等等)</span><br><span class="line"></span><br><span class="line">	b.页面有没有出现遮挡文字情况，图标遮挡相应文字，相应画面，字体大小颜色样式是否还原设计图</span><br><span class="line"></span><br><span class="line">	c.功能的实现，预加载的页面完成后相应的内容有没有出现，页面之间的跳转有没有问题，页面的功能有没	有问题</span><br><span class="line">    </span><br><span class="line">    d.安卓和ios或许有区别和兼容性问题（重点）</span><br><span class="line"></span><br><span class="line">	e.如果是手打的文字，注意逐字逐句排查有无错别字</span><br></pre></td></tr></table></figure>



<h5 id="1-4-打包问题"><a href="#1-4-打包问题" class="headerlink" title="1.4 打包问题"></a>1.4 打包问题</h5>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">a、webpack文件夹</span><br><span class="line">    线上地址：publicPath</span><br><span class="line">    对应的index配置: 要看index名字和主目录下的文件名字是否相同</span><br><span class="line"></span><br><span class="line">b、全局配置的js文件（common.js）</span><br><span class="line">    PROJECTUSER:这里存放的是 localstorage，每次都要不一样</span><br><span class="line">    </span><br><span class="line">    微信分享信息：url可能会变（取决于webpack 里的配置）</span><br><span class="line">    </span><br><span class="line">    获取用户信息：GetUserInfo：获取用户信息（注意放开注释）</span><br><span class="line">    </span><br><span class="line">    获取code：GetCode：去微信拿code（注意放开注释）</span><br><span class="line"></span><br><span class="line">c、index.html 文件</span><br><span class="line">	注意index文件名是否与webpack配置一致</span><br><span class="line">    </span><br><span class="line">	注意引入的js、css文件等是否是相应的地址</span><br><span class="line"></span><br><span class="line">d、打包命令</span><br><span class="line">	在本机运行：dev</span><br><span class="line">	打包给后台：build</span><br></pre></td></tr></table></figure>



<h3 id="2-h5页面"><a href="#2-h5页面" class="headerlink" title="2.h5页面"></a>2.h5页面</h3><h5 id="2-1-布局紊乱，背景图片过大"><a href="#2-1-布局紊乱，背景图片过大" class="headerlink" title="2.1 布局紊乱，背景图片过大"></a>2.1 布局紊乱，背景图片过大</h5><ul>
<li>问题描述：在自己ps抠图的过程中，要考虑到扣下来的图片是否体积太大，如果太大会导致在加载时间变                   长，用户体验不好，布局紊乱多是定位的使用不得当</li>
<li>问题解决方案：需要用到压缩工具将对应图片压缩小</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、一个压缩png图片的网站：</span><br><span class="line">	https:<span class="comment">//tinypng.com/  </span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、布局时，在移动端先考虑 flex 布局，会轻松很多，慎用定位</span><br></pre></td></tr></table></figure>



<h5 id="2-2-vue中的微信分享-不含获取用户信息"><a href="#2-2-vue中的微信分享-不含获取用户信息" class="headerlink" title="2.2 vue中的微信分享(不含获取用户信息)"></a>2.2 vue中的微信分享(不含获取用户信息)</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">1</span>、不需要获取用户信息的微信分享</span><br><span class="line">注意接口的修改</span><br><span class="line"></span><br><span class="line">a.在 html 中加入标签</span><br><span class="line">&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://res.wx.qq.com/open/js/jweixin-1.2.0.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">b.创建一个关于微信的分享配置文件 可以在 assets/</span>js 下创建</span><br><span class="line"><span class="keyword">import</span> &#123;WECHAT_CONFIG&#125; <span class="keyword">from</span> <span class="string">'../../utils/apiList'</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">'../../utils/http'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">wxConfig</span>(<span class="params">apiList</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> path = <span class="string">'http://infomgr.mind-node.com'</span> + WECHAT_CONFIG;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="string">"?url="</span> + <span class="built_in">encodeURIComponent</span>(<span class="built_in">window</span>.location.href) + <span class="string">"&amp;sign=sign"</span>;</span><br><span class="line">    http.get(WECHAT_CONFIG + data).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(res) &#123;</span><br><span class="line">            <span class="keyword">let</span> resData = <span class="built_in">JSON</span>.parse(res.data)</span><br><span class="line">            <span class="built_in">console</span>.log(resData)</span><br><span class="line">            <span class="keyword">let</span> signInfo = <span class="built_in">JSON</span>.parse(resData.signInfo)</span><br><span class="line">            <span class="built_in">console</span>.log(signInfo)</span><br><span class="line">            wx.config(&#123;</span><br><span class="line">                debug: <span class="literal">false</span>, <span class="comment">// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。</span></span><br><span class="line">                appId: signInfo.appId, <span class="comment">// 必填，公众号的唯一标识</span></span><br><span class="line">                timestamp: signInfo.timestamp, <span class="comment">// 必填，生成签名的时间戳</span></span><br><span class="line">                nonceStr: signInfo.noncestr, <span class="comment">// 必填，生成签名的随机串</span></span><br><span class="line">                signature: signInfo.signature, <span class="comment">// 必填，签名，见附录1</span></span><br><span class="line">                jsApiList: apiList <span class="comment">// 必填，需要使用的JS接口列表，所有JS接口列表见附录2</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">微信分享信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> shareOptions = &#123;</span><br><span class="line">    url: <span class="string">"http://h5.mind-node.com/info/index.html"</span>,</span><br><span class="line">    title: <span class="string">"辽宁省暨沈阳市提信心·促销费活动"</span>,</span><br><span class="line">    imgUrl: <span class="string">"https://mind-node.oss-cn-beijing.aliyuncs.com/leave_message/share.jpg"</span>,<span class="comment">//转发图标</span></span><br><span class="line">    desc: <span class="string">"权威信息发布平台"</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createShare</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    options = options || &#123;&#125;;</span><br><span class="line">    wx.onMenuShareAppMessage(&#123; <span class="comment">//分享给好友</span></span><br><span class="line">        title: options.title || <span class="string">""</span>, <span class="comment">// 分享标题</span></span><br><span class="line">        link: options.url || <span class="string">""</span>, <span class="comment">// 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致</span></span><br><span class="line">        imgUrl: options.imgUrl || <span class="string">""</span>, <span class="comment">// 分享图标</span></span><br><span class="line">        desc: options.desc || <span class="string">""</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    wx.onMenuShareTimeline(&#123; <span class="comment">//发送到朋友圈</span></span><br><span class="line">        title: options.title || <span class="string">""</span>, <span class="comment">// 分享标题</span></span><br><span class="line">        link: options.url || <span class="string">""</span>, <span class="comment">// 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致</span></span><br><span class="line">        imgUrl: options.imgUrl || <span class="string">""</span>, <span class="comment">// 分享图标</span></span><br><span class="line">        desc: options.desc || <span class="string">""</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">c.在app.vue里面引入配置</span><br><span class="line"><span class="keyword">import</span> &#123;wxConfig&#125; <span class="keyword">from</span> <span class="string">'../src/assets/js/wx'</span></span><br><span class="line">在created生命周期里调用</span><br><span class="line">wxConfig([<span class="string">'onMenuShareTimeline'</span>, <span class="string">"onMenuShareAppMessage"</span>, <span class="string">"hideMenuItems"</span>]);</span><br><span class="line"></span><br><span class="line">d.在主页面index.vue created生命周期里调用wx.ready</span><br><span class="line">    wx.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        createShare(&#123;</span><br><span class="line">            url: <span class="string">"http://h5.mind-node.com/info/index.html"</span>,</span><br><span class="line">            title: <span class="string">"辽宁省暨沈阳市提信心·促销费活动"</span>,</span><br><span class="line">            imgUrl: <span class="string">"https://mind-node.oss-cn-beijing.aliyuncs.com/leave_message/share.jpg"</span>,<span class="comment">//转发图标</span></span><br><span class="line">            desc: <span class="string">"权威信息发布平台"</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h5 id="2-3-ios-输入框弹起问题"><a href="#2-3-ios-输入框弹起问题" class="headerlink" title="2.3 ios 输入框弹起问题"></a>2.3 ios 输入框弹起问题</h5><ul>
<li>问题描述：在ios中的输入框输入时键盘弹起会将页面往上顶，并且键盘收起后页面不会回弹</li>
<li>问题解决方案：在结束输入后让页面滚动回来</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">jQuery中：</span><br><span class="line"><span class="comment">//在全局js中加入</span></span><br><span class="line">$(<span class="string">'input, textarea'</span>).on(<span class="string">'blur'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 滚动到顶部</span></span><br><span class="line">  <span class="built_in">window</span>.scroll(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// 滚动到底部</span></span><br><span class="line">  <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vue中:</span><br><span class="line"><span class="number">1.</span>绑定focus事件</span><br><span class="line"> &lt;input type=<span class="string">"text"</span> placeholder=<span class="string">"信息发布单位/企业名称"</span> @focus=<span class="string">"getFocus"</span> v-model=<span class="string">"unitname"</span>&gt;</span><br><span class="line"> </span><br><span class="line"> <span class="number">2.</span>添加函数</span><br><span class="line">   methods:&#123;</span><br><span class="line">       getFocus:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="built_in">window</span>.addEventListener(<span class="string">'focusout'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">           <span class="comment">// 滚动到顶部</span></span><br><span class="line">           <span class="built_in">window</span>.scroll(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">           <span class="comment">// 滚动到底部</span></span><br><span class="line">           <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="built_in">document</span>.documentElement.clientHeight);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-4-将后台返回的毫秒时间转化为年月日"><a href="#2-4-将后台返回的毫秒时间转化为年月日" class="headerlink" title="2.4 将后台返回的毫秒时间转化为年月日"></a>2.4 将后台返回的毫秒时间转化为年月日</h5><ul>
<li>问题描述：后台返回的时间格式多是毫秒值，和日常生活中使用的时间习惯不同</li>
<li>问题解决方案：使用一个函数对时间格式重新写入</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//对应渲染位置调用该函数</span></span><br><span class="line">handleTime(time)&#123;</span><br><span class="line">  <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>(time);</span><br><span class="line">  <span class="keyword">var</span> month = date.getMonth() + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> day = date.getDate();</span><br><span class="line">  <span class="keyword">if</span> (month &lt; <span class="number">10</span>) &#123;</span><br><span class="line">   month = month + <span class="string">"月"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (day &lt; <span class="number">10</span>) &#123;</span><br><span class="line">   day = day + <span class="string">"日"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> str = <span class="string">""</span> + year + month + day</span><br><span class="line">  <span class="keyword">return</span> str;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-在vue项目里实现上下滑动翻页"><a href="#2-5-在vue项目里实现上下滑动翻页" class="headerlink" title="2.5 在vue项目里实现上下滑动翻页"></a>2.5 在vue项目里实现上下滑动翻页</h5><ul>
<li>问题描述：手机h5页面多是上下滑动翻页，用户体验会更好</li>
<li>问题解决方案：使用类似滑动轮播图的形式，将页面分为一页一页的单独滑动页面</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这里使用的是 swiper 实现功能</span></span><br><span class="line"><span class="number">1.</span>打好vue-cli项目，安装vue-awesome-swipe</span><br><span class="line">npm i --s vue-awesome-swiper</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>main.js 中引入</span><br><span class="line"><span class="keyword">import</span> VueAwesomeSwiper <span class="keyword">from</span> <span class="string">'vue-awesome-swiper'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'swiper/dist/css/swiper.css'</span></span><br><span class="line">Vue.use(VueAwesomeSwiper)</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>一般是在主页中有下面的操作</span><br><span class="line"><span class="number">3.1</span>组件中写上swiper结构</span><br><span class="line">&lt;transition name=<span class="string">"fade"</span>&gt;</span><br><span class="line">    &lt;swiper id=<span class="string">"swiperBox"</span> v-bind:options=<span class="string">"swiperOption"</span> ref=<span class="string">"mySwiper"</span>&gt;</span><br><span class="line">        &lt;!-- 第一页 --&gt;</span><br><span class="line">        &lt;swiper-slide <span class="class"><span class="keyword">class</span></span>=<span class="string">"swiper-slide1"</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"page"</span>&gt;</span><br><span class="line">                &lt;home&gt;&lt;<span class="regexp">/home&gt;</span></span><br><span class="line"><span class="regexp">			&lt;/</span>div&gt;</span><br><span class="line">		&lt;<span class="regexp">/swiper-slide&gt;</span></span><br><span class="line"><span class="regexp">		&lt;!-- 第二页 --&gt;</span></span><br><span class="line"><span class="regexp">        &lt;swiper-slide class="swiper-slide2"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;div class="page"&gt;</span></span><br><span class="line"><span class="regexp">                 &lt;statistics&gt;&lt;/</span>statistics&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>swiper-slide&gt;</span><br><span class="line">        &lt;!-- 第三页 --&gt;</span><br><span class="line">        &lt;swiper-slide <span class="class"><span class="keyword">class</span></span>=<span class="string">"swiper-slide3"</span>&gt;</span><br><span class="line">             &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"page"</span>&gt;</span><br><span class="line">                 &lt;enterprise&gt;&lt;<span class="regexp">/enterprise&gt;</span></span><br><span class="line"><span class="regexp">             &lt;/</span>div&gt;</span><br><span class="line">         &lt;<span class="regexp">/swiper-slide&gt;</span></span><br><span class="line"><span class="regexp">         &lt;!-- 第四页 --&gt;</span></span><br><span class="line"><span class="regexp">         &lt;swiper-slide class="swiper-slide4"&gt;</span></span><br><span class="line"><span class="regexp">              &lt;div class="page"&gt;</span></span><br><span class="line"><span class="regexp">                  &lt;congratulation&gt;&lt;/</span>congratulation&gt;</span><br><span class="line">              &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">          &lt;/</span>swiper-slide&gt;</span><br><span class="line">    &lt;<span class="regexp">/swiper&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>transition&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">3.2</span> 引入swiper组件</span><br><span class="line"><span class="keyword">import</span> &#123; swiper, swiperSlide &#125; <span class="keyword">from</span> <span class="string">'vue-awesome-swiper'</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.3</span> 注册组件</span><br><span class="line">components:&#123;</span><br><span class="line">      home,<span class="comment">//第1页内容组件</span></span><br><span class="line">      statistics,<span class="comment">//第2页内容组件</span></span><br><span class="line">      enterprise,<span class="comment">//第3页内容组件</span></span><br><span class="line">      congratulation,<span class="comment">//第4页内容组件</span></span><br><span class="line">          </span><br><span class="line">      swiper,</span><br><span class="line">      swiperSlide,</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line"><span class="number">3.4</span> swiper配置,具体更详细配置可参考swipei中文官网： https:<span class="comment">//www.swiper.com.cn/</span></span><br><span class="line">    </span><br><span class="line">data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        swiperOption: &#123;</span><br><span class="line">            <span class="comment">// swiper configs 所有的配置同swiper官方api配置</span></span><br><span class="line">            notNextTick: <span class="literal">true</span>,<span class="comment">//notNextTick是一个组件自有属性，如果notNextTick设置为true，组件则不会通过NextTick来实例化swiper，也就意味着你可以在第一时间获取到swiper对象，假如你需要刚加载遍使用获取swiper对象来做什么事，那么这个属性一定要是true</span></span><br><span class="line">            direction: <span class="string">'vertical'</span>,<span class="comment">//垂直方向移动</span></span><br><span class="line">            grabCursor: <span class="literal">true</span>,<span class="comment">//鼠标覆盖Swiper时指针会变成手掌形状，拖动时指针会变成抓手形状</span></span><br><span class="line">            setWrapperSize: <span class="literal">true</span>,<span class="comment">//Swiper使用flexbox布局(display: flex)，开启这个设定会在Wrapper上添加等于slides相加的宽或高，在对flexbox布局的支持不是很好的浏览器中可能需要用到。</span></span><br><span class="line">            autoHeight: <span class="literal">true</span>,<span class="comment">//自动高度。设置为true时，wrapper和container会随着当前slide的高度而发生变化</span></span><br><span class="line">            slidesPerView: <span class="number">1</span>,<span class="comment">//设置slider容器能够同时显示的slides数量(carousel模式)。可以设置为数字（可为小数，小数不可loop），或者 'auto'则自动根据slides的宽度来设定数量。loop模式下如果设置为'auto'还需要设置另外一个参数loopedSlides。</span></span><br><span class="line">            mousewheel: <span class="literal">false</span>,<span class="comment">//开启鼠标滚轮控制Swiper切换。可设置鼠标选项，默认值false</span></span><br><span class="line">            mousewheelControl: <span class="literal">false</span>,<span class="comment">//同上</span></span><br><span class="line">            height: <span class="built_in">window</span>.innerHeight, <span class="comment">// 高度设置，占满设备高度</span></span><br><span class="line">            resistanceRatio: <span class="number">0</span>,<span class="comment">//抵抗率。边缘抵抗力的大小比例。值越小抵抗越大越难将slide拖离边缘，0时完全无法拖离。本业务需要</span></span><br><span class="line">            observeParents: <span class="literal">true</span>,<span class="comment">//将observe应用于Swiper的父元素。当Swiper的父元素变化时，例如window.resize，Swiper更新</span></span><br><span class="line">    </span><br><span class="line">            <span class="comment">// 如果自行设计了插件，那么插件的一些配置相关参数，也应该出现在这个对象中，如下debugger</span></span><br><span class="line">            <span class="keyword">debugger</span>: <span class="literal">true</span>,</span><br><span class="line">    </span><br><span class="line">            <span class="comment">// swiper的各种回调函数也可以出现在这个对象中，和swiper官方一样</span></span><br><span class="line">            onTransitionStart(swiper)&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(swiper)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h5 id="2-6-微信h5页面产生导航栏问题"><a href="#2-6-微信h5页面产生导航栏问题" class="headerlink" title="2.6 微信h5页面产生导航栏问题"></a>2.6 微信h5页面产生导航栏问题</h5><ul>
<li>问题描述：在微信h5页面路由跳转的时候有时候会产生一个微信导航栏挤压页面，影响内容展示</li>
<li>问题产生原因： 底部导航栏是因为出现<code>history记录</code>才出现的，使用replace就没有history记录，所以就可以完美隐藏导航栏了 </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解决办法</span></span><br><span class="line">统一将路由跳转方式由：</span><br><span class="line"><span class="keyword">this</span>.$router.push(<span class="string">'/path'</span>&#125;)</span><br><span class="line"></span><br><span class="line">改为：</span><br><span class="line"><span class="keyword">this</span>.$router.replace(<span class="string">'/path'</span>)</span><br></pre></td></tr></table></figure>

</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">mind-node</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://mind-node.github.io/2020/04/13/%E4%BB%81%E5%AD%9A%E5%B0%8F%E6%B8%B8%E6%88%8F%E6%80%BB%E7%BB%93/">https://mind-node.github.io/2020/04/13/%E4%BB%81%E5%AD%9A%E5%B0%8F%E6%B8%B8%E6%88%8F%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://mind-node.github.io">博客</a>！</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="next-post pull-right"><a href="/2020/04/10/minapp/"><span>电子名片</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'f69cec669dd95cc52614',
  clientSecret: '4774f3884dd034bec35039d6ffaa295b4e8992f2',
  repo: 'mind-node.github.io',
  owner: 'mind-node',
  admin: 'mind-node,fh332393900',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By mind-node</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>